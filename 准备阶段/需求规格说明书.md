# 基于python的英语发音例句库接口：需求规格说明书

**Python课程设计小组：张一鸣，张晓艺，潘昊**

**组长：张一鸣**

## 文档修改记录

| 版本号 | 版本描述                       | 责任人 | 日期      | 备注 |
| ------ | ------------------------------ | ------ | --------- | ---- |
| V1.0   | 初始编制                       | 张一鸣 | 2020-5-4  |      |
| V1.1   | 完善内容                       | 张一鸣 | 2020-6-9  |      |
| V1.2   | 移除用户定制的讳词过滤功能     | 张一鸣 | 2020-6-11 |      |
| V1.3   | 修改影片例句表结构             | 张一鸣 | 2020-6-11 |      |
| V1.4   | 电影例句表的s_id键添加自动递增 | 张一鸣 | 2020-6-11 |      |
| V1.5   | 添加了json的传输形式  | 张一鸣  | 2020-6-16 |
## 第一章 引言

### 1.1 定位与目标

随着社会发展，受教育人数逐渐提升，对英语类学习软件的需求亦逐年递增。但是，辅助英语学习的例句库却始终被各家独占。小的开发者团体只能购买权威词典的例句，其虽然发音标准，但朗读人员少、内容乏味且缺少生活化表达。为解决这类问题，提高学生学习兴趣，我们希望能够分析英文电影中的句子，并将其按照单词归类成例句库，供开发者调用。

## 1.2 对象

**本《软件需求规格说明书》的预期读者是：**

- 项目审核教师
- 项目组所有人员
- 测试组人员

## 2.需求概述

本接口的基本目标是满足各英语学习软件对英语例句的需求，为了满足开发人员灵活使用，应做到以下几点要求：

1. 例句输入数据库时，应对其进行筛查，并尽量过滤满足以下情况的例句：
   1. 例句较短、对上下文有要求等没有实用价值的。
   2. 例句中含有不雅词汇的。
   3. 例句非目标语言，即非英语的。
2. 用户请求得到例句时，可以选择其难度。
3. 为提高用户体验，接口响应时间应不超过300ms。

### 2.1 系统结构

![](https://www.z4a.net/images/2020/06/13/06b9a5e9840aced1b339645ad8bde436.png)

## 3. 系统功能需求

## 3.1 功能总览

| 功能         | 具体描述                             | 使用此功能的系统角色 |
| ------------ | ------------------------------------ | -------------------- |
| 查询单词释义 | 包括词性和中文释义                   | 开发人员             |
| 得到例句     | 包括中文和英文例句。可以选择例句难度 | 开发人员             |
| 得到例句音频 | 返回音频存储地址                     | 开发人员             |

### 3.2 业务流程图

![](https://www.z4a.net/images/2020/06/13/bbbdbe9236d2ecb89ad3a5ef9dbc4465.png)

### 3.3 数据流图

![](https://www.z4a.net/images/2020/06/13/6b1633aa1ebc4803eddc674786c34f3c.png)

### 3.4 数据字典

**用户表(t_user)**

| 编号 | 字段名称 | 字段含义 | 字段类型 | 字段长度 | 是否主键 | 默认值 | 是否可空 |
| ---- | -------- | -------- | -------- | -------- | -------- | ------ | -------- |
| 1    | u_name   | 用户名   | Varchar  | 20       | √        |        | ×        |
| 2    | u_key    | 密钥     | Varchar  | 128      |          |        | ×        |



**单词表(t_word)**

| 编号 | 字段名称    | 字段含义                   | 字段类型 | 字段长度 | 是否主键 | 默认值 | 是否可空 |
| ---- | ----------- | -------------------------- | -------- | -------- | -------- | ------ | -------- |
| 1    | word        | 单词                       | Varchar  | 50       | √        |        | ×        |
| 2    | translation | 中文翻译                   | Text     |          |          |        | ×        |
| 3    | sentences   | 例句（例句id，用“\|”分隔） | Text     | --       |          |        | ×        |



**影片例句表(t_sentence)**

| 编号 | 字段名称 | 字段含义           | 字段类型 | 字段长度 | 是否主键 | 默认值 | 是否可空 |
| ---- | -------- | ------------------ | -------- | -------- | -------- | ------ | -------- |
| 1    | s_id     | 例句id（自动递增） | Integer  | 7        | √        |        | ×        |
| 2    | s_en     | 英文原版例句       | Text     |          |          |        | ×        |
| 3    | s_cn     | 中文翻译例句       | Text     |          |          |        | ×        |
| 4    | s_voice  | 音频文件地址       | Varchar  | 100      |          |        | √        |
| 5    | s_level  | 难度分级（0-2）    | Integer  | 1        |          | 2      | ×        |
| 6    | f_name   | 电影名称           | Varchar  | 100      |          |        | ×        |

### 3.5 E-R图

![](https://www.z4a.net/images/2020/06/13/af75f02c856815a13ed918c1982e984c.png)

**用户表E-R图**

![](https://www.z4a.net/images/2020/06/13/6641358b8390efa79bc1b68084747c4a.png)

**单词表E-R图**

![](https://www.z4a.net/images/2020/06/13/a355db4cedc5edd5a4b9b79754ea2ad8.png)

**影片例句表E-R图**

### 传输范例

**用户发送**
```json
{
    "security":{
        "uname":"用户名",
        "key":"MD5(key+时间戳)",
        "time": 0.0
    },
    "word":"查询单词",
    "option":{
        "level":0
    }
}
```
注：time格式为时间戳，最多精确到小数点后7位

**用户接收**
```json
{
    "statue":0,
    "word":"查询单词",
    "trans":"中文释义",
    "sentences":[
        {
            "fname":"电影名",
            "en":"英文原版例句",
            "cn":"中文翻译例句",
            "voice":"音频文件地址"
        },
        {
            "fname":"电影名",
            "en": "英文原版例句",
            "cn": "中文翻译例句",
            "voice": "音频文件地址"
        }
    ]
}
```
注：statue状态码的值有：

| 状态码 | 含义 |
| ---- | -------- |
| 0    | 请求成功        |
| 1    | 请求单词未录入   |
| 2    | 用户认证失败     |
| 3    | 传入数据格式错误  |

## 软硬件及外部系统接口需求

### 4.1 硬件需求

理论上可以在任何运行Python且接入网络的设备运行，但是设备运算能力过低会延长系统响应时间，影响用户体验。

## 4.3 运行环境

开发环境为Python 3.8.1，低于此版本可能引起运行故障。

## 5. 可靠性与可用性需求

### 5.1 性能需求

1. 处理能力

   暂未进行不同性能环境下的实验，但是鉴于本接口属于目标应用高度常用的类型，推测对性能要求较高，使其具备高并发的稳定性环境。

2. 响应时间

   为了给用户良好的体验，综合网络上已知的经验及数据，响应事件不得高于300ms。

### 5.2 安全性需求

由于单条数据价值不高，不对传输过程中的数据进行加密，但是应对接入用户进行判断，防止未认证的用户接入。

---

参考文献：

1. 《软件需求规格说明书范例》来源

   https://www.omegaxyz.com/2019/07/23/software-specification/

2. 《软件工程导论》张海藩 牟永敏著
